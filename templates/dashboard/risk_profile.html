{% extends "dashboard/dashboard_base.html" %}

{% block title %}Risk Profile Assessment - tCapital{% endblock %}

{% block dashboard_title %}Risk Profile Assessment{% endblock %}
{% block dashboard_subtitle %}Help us understand your investment goals and risk tolerance to provide personalized recommendations{% endblock %}

{% block dashboard_content %}

<div class="row justify-content-center">
    <div class="col-lg-8">
        <div class="card border-0 shadow-sm">
            <div class="card-header bg-primary text-white">
                <h5 class="mb-0">
                    <i class="fas fa-user-check me-2"></i>Investment Risk Assessment
                </h5>
            </div>
            
            <form method="POST" action="{{ url_for('portfolio_risk_profile') }}">
                <div class="card-body">
                    
                    <!-- Age Group -->
                    <div class="mb-4">
                        <label class="form-label fw-bold">What is your age group?</label>
                        <div class="row">
                            {% for age in ['18-25', '26-35', '36-45', '46-55', '55+'] %}
                            <div class="col-md-4 mb-2">
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="age_group" value="{{ age }}" id="age_{{ age }}"
                                           {% if risk_profile and risk_profile.age_group == age %}checked{% endif %} required>
                                    <label class="form-check-label" for="age_{{ age }}">{{ age }} years</label>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                    
                    <!-- Investment Goal -->
                    <div class="mb-4">
                        <label class="form-label fw-bold">What is your primary investment goal?</label>
                        <div class="row">
                            {% set goals = [
                                ('wealth_creation', 'Wealth Creation'),
                                ('retirement', 'Retirement Planning'),
                                ('children_education', 'Children Education'),
                                ('house_purchase', 'House Purchase'),
                                ('emergency_fund', 'Emergency Fund')
                            ] %}
                            {% for value, label in goals %}
                            <div class="col-md-6 mb-2">
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="investment_goal" value="{{ value }}" id="goal_{{ value }}"
                                           {% if risk_profile and risk_profile.investment_goal == value %}checked{% endif %} required>
                                    <label class="form-check-label" for="goal_{{ value }}">{{ label }}</label>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                    
                    <!-- Investment Horizon -->
                    <div class="mb-4">
                        <label class="form-label fw-bold">What is your investment time horizon?</label>
                        <div class="row">
                            {% set horizons = [
                                ('short_term', 'Short Term (1-3 years)'),
                                ('medium_term', 'Medium Term (3-7 years)'),
                                ('long_term', 'Long Term (7+ years)')
                            ] %}
                            {% for value, label in horizons %}
                            <div class="col-md-4 mb-2">
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="investment_horizon" value="{{ value }}" id="horizon_{{ value }}"
                                           {% if risk_profile and risk_profile.investment_horizon == value %}checked{% endif %} required>
                                    <label class="form-check-label" for="horizon_{{ value }}">{{ label }}</label>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                    
                    <!-- Risk Tolerance -->
                    <div class="mb-4">
                        <label class="form-label fw-bold">How would you describe your risk tolerance?</label>
                        <div class="row">
                            {% set tolerances = [
                                ('conservative', 'Conservative - I prefer stable, low-risk investments'),
                                ('moderate', 'Moderate - I can accept some risk for better returns'),
                                ('aggressive', 'Aggressive - I am comfortable with high risk for high returns')
                            ] %}
                            {% for value, label in tolerances %}
                            <div class="col-12 mb-2">
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="risk_tolerance" value="{{ value }}" id="tolerance_{{ value }}"
                                           {% if risk_profile and risk_profile.risk_tolerance == value %}checked{% endif %} required>
                                    <label class="form-check-label" for="tolerance_{{ value }}">{{ label }}</label>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                    
                    <!-- Loss Tolerance -->
                    <div class="mb-4">
                        <label class="form-label fw-bold">What is the maximum loss you can tolerate in your portfolio in a year?</label>
                        <div class="row">
                            {% for loss in [5, 10, 15, 20, 25] %}
                            <div class="col-md-4 mb-2">
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="loss_tolerance" value="{{ loss }}" id="loss_{{ loss }}"
                                           {% if risk_profile and risk_profile.loss_tolerance == loss %}checked{% endif %} required>
                                    <label class="form-check-label" for="loss_{{ loss }}">{{ loss }}%</label>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                    
                    <!-- Investment Experience -->
                    <div class="mb-4">
                        <label class="form-label fw-bold">What is your investment experience level?</label>
                        <div class="row">
                            {% set experiences = [
                                ('beginner', 'Beginner - New to investing'),
                                ('intermediate', 'Intermediate - Some investment experience'),
                                ('advanced', 'Advanced - Experienced investor')
                            ] %}
                            {% for value, label in experiences %}
                            <div class="col-md-4 mb-2">
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="investment_experience" value="{{ value }}" id="exp_{{ value }}"
                                           {% if risk_profile and risk_profile.investment_experience == value %}checked{% endif %} required>
                                    <label class="form-check-label" for="exp_{{ value }}">{{ label }}</label>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                    
                    <!-- Current Risk Profile Display -->
                    {% if risk_profile %}
                    <div class="alert alert-info">
                        <h6 class="fw-bold mb-2">Your Current Risk Profile:</h6>
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <strong>Risk Category:</strong> {{ risk_profile.risk_category }}<br>
                                <strong>Risk Score:</strong> {{ risk_profile.risk_score }}/100
                            </div>
                            <div>
                                <span class="badge bg-{{ 'success' if risk_profile.risk_category == 'Conservative' else 'warning' if risk_profile.risk_category == 'Balanced' else 'danger' }} fs-6">
                                    {{ risk_profile.risk_category }}
                                </span>
                            </div>
                        </div>
                    </div>
                    {% endif %}
                    
                </div>
                
                <div class="card-footer bg-light">
                    <div class="d-flex justify-content-between">
                        <a href="{{ url_for('dashboard_my_portfolio') }}" class="btn btn-secondary">
                            <i class="fas fa-arrow-left me-2"></i>Back to Portfolio
                        </a>
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-save me-2"></i>Save Risk Profile
                        </button>
                    </div>
                </div>
            </form>
        </div>
        
        <!-- Information Card -->
        <div class="card border-0 shadow-sm mt-4">
            <div class="card-body">
                <h6 class="fw-bold mb-3">
                    <i class="fas fa-info-circle text-primary me-2"></i>Why Risk Profiling Matters
                </h6>
                <div class="row">
                    <div class="col-md-4 mb-3">
                        <div class="text-center">
                            <i class="fas fa-bullseye fa-2x text-primary mb-2"></i>
                            <h6>Personalized Recommendations</h6>
                            <small class="text-muted">Get investment suggestions that match your risk appetite and goals</small>
                        </div>
                    </div>
                    <div class="col-md-4 mb-3">
                        <div class="text-center">
                            <i class="fas fa-balance-scale fa-2x text-success mb-2"></i>
                            <h6>Portfolio Optimization</h6>
                            <small class="text-muted">Ensure your portfolio allocation aligns with your risk tolerance</small>
                        </div>
                    </div>
                    <div class="col-md-4 mb-3">
                        <div class="text-center">
                            <i class="fas fa-shield-alt fa-2x text-warning mb-2"></i>
                            <h6>Risk Management</h6>
                            <small class="text-muted">Better understand and manage your investment risks</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

{% endblock %}