{% extends "dashboard/dashboard_base.html" %}

{% block dashboard_title %}Dashboard{% endblock %}
{% block dashboard_subtitle %}Your AI-powered trading command center{% endblock %}

{% block dashboard_toolbar %}
<div class="header-actions">
    <button class="btn btn-outline-primary btn-sm me-2" onclick="refreshDashboard()">
        <i class="fas fa-sync-alt me-1"></i>
        Refresh
    </button>
    <div class="dropdown">
        <button class="btn btn-primary btn-sm dropdown-toggle" type="button" data-bs-toggle="dropdown">
            <i class="fas fa-plus me-1"></i>
            Quick Actions
        </button>
        <ul class="dropdown-menu">
            <li><a class="dropdown-item" href="{{ url_for('dashboard_stock_picker') }}">
                <i class="fas fa-robot me-2"></i>AI Stock Picker
            </a></li>
            {% if current_user.is_authenticated and current_user.can_access_menu('dashboard_trade_now') %}
            <li><a class="dropdown-item" href="{{ url_for('dashboard_trade_now') }}">
                <i class="fas fa-exchange-alt me-2"></i>Start Trading
            </a></li>
            {% endif %}
        </ul>
    </div>
</div>
{% endblock %}

{% block dashboard_content %}
<!-- Portfolio Overview Cards -->
<div class="dashboard-grid cols-4">
    <!-- Total Portfolio Value -->
    <div class="dashboard-card">
        <div class="card-body">
            <div class="flex-between mb-3">
                <div class="metric-icon">
                    <i class="fas fa-wallet text-primary"></i>
                </div>
                <div class="metric-change positive">
                    <i class="fas fa-arrow-up"></i>
                    <span>+12.5%</span>
                </div>
            </div>
            <h3 class="metric-value">₹2,45,680</h3>
            <p class="metric-label">Total Portfolio Value</p>
            <div class="metric-trend">
                <small class="text-muted">+₹27,180 this month</small>
            </div>
        </div>
    </div>

    <!-- AI Trading Signals -->
    <div class="dashboard-card clickable-card" onclick="window.location.href='{{ url_for('dashboard_trading_signals') }}'">
        <div class="card-body">
            <div class="flex-between mb-3">
                <div class="metric-icon">
                    <i class="fas fa-chart-line text-success"></i>
                </div>
                <div class="metric-badge">
                    <span class="badge bg-success">Live</span>
                </div>
            </div>
            <h3 class="metric-value">18</h3>
            <p class="metric-label">Active Signals</p>
            <div class="metric-trend">
                <small class="text-muted">3 new signals today</small>
            </div>
            <button class="btn btn-sm btn-outline-success mt-2" onclick="event.stopPropagation(); showHighConfidenceSignals()">
                <i class="fas fa-star me-1"></i>High-Confidence Alerts
            </button>
        </div>
    </div>

    <!-- Active Strategies -->
    <div class="dashboard-card">
        <div class="card-body">
            <div class="flex-between mb-3">
                <div class="metric-icon">
                    <i class="fas fa-cogs text-warning"></i>
                </div>
                <div class="metric-change neutral">
                    <i class="fas fa-minus"></i>
                    <span>Stable</span>
                </div>
            </div>
            <h3 class="metric-value">5</h3>
            <p class="metric-label">Active Strategies</p>
            <div class="metric-trend">
                <small class="text-muted">2 performing well</small>
            </div>
        </div>
    </div>

    <!-- Account Status -->
    <div class="dashboard-card">
        <div class="card-body">
            <div class="flex-between mb-3">
                <div class="metric-icon">
                    <i class="fas fa-user-check text-info"></i>
                </div>
                <div class="metric-status">
                    <div class="status-dot active"></div>
                </div>
            </div>
            <h3 class="metric-value">{{ broker_accounts|length }}</h3>
            <p class="metric-label">Connected Brokers</p>
            <div class="metric-trend">
                <small class="text-muted">All systems operational</small>
            </div>
        </div>
    </div>
</div>

<!-- Main Dashboard Content -->
<div class="dashboard-grid cols-3">
    <!-- Allocation by Asset Types -->
    <div class="dashboard-card">
        <div class="card-header">
            <h3>Allocation by Asset Types</h3>
            <a href="{{ url_for('dashboard_my_portfolio') if current_user.can_access_menu('dashboard_my_portfolio') else '#' }}" class="view-all">
                Details
            </a>
        </div>
        <div class="card-body">
            <div class="asset-allocation">
                <div class="allocation-item">
                    <div class="allocation-header">
                        <div class="allocation-info">
                            <i class="fas fa-chart-line text-primary me-2"></i>
                            <span class="asset-name">Equities</span>
                        </div>
                        <span class="allocation-percentage">45.2%</span>
                    </div>
                    <div class="progress" style="height: 8px; margin-top: 8px;">
                        <div class="progress-bar bg-primary" style="width: 45.2%"></div>
                    </div>
                    <small class="text-muted">₹1,10,968</small>
                </div>
                <div class="allocation-item">
                    <div class="allocation-header">
                        <div class="allocation-info">
                            <i class="fas fa-coins text-success me-2"></i>
                            <span class="asset-name">Mutual Funds</span>
                        </div>
                        <span class="allocation-percentage">28.5%</span>
                    </div>
                    <div class="progress" style="height: 8px; margin-top: 8px;">
                        <div class="progress-bar bg-success" style="width: 28.5%"></div>
                    </div>
                    <small class="text-muted">₹69,999</small>
                </div>
                <div class="allocation-item">
                    <div class="allocation-header">
                        <div class="allocation-info">
                            <i class="fas fa-university text-info me-2"></i>
                            <span class="asset-name">Fixed Income</span>
                        </div>
                        <span class="allocation-percentage">18.3%</span>
                    </div>
                    <div class="progress" style="height: 8px; margin-top: 8px;">
                        <div class="progress-bar bg-info" style="width: 18.3%"></div>
                    </div>
                    <small class="text-muted">₹44,959</small>
                </div>
                <div class="allocation-item">
                    <div class="allocation-header">
                        <div class="allocation-info">
                            <i class="fas fa-exchange-alt text-warning me-2"></i>
                            <span class="asset-name">F&O</span>
                        </div>
                        <span class="allocation-percentage">8.0%</span>
                    </div>
                    <div class="progress" style="height: 8px; margin-top: 8px;">
                        <div class="progress-bar bg-warning" style="width: 8%"></div>
                    </div>
                    <small class="text-muted">₹19,654</small>
                </div>
            </div>
        </div>
    </div>

    <!-- Overall Health Status -->
    <div class="dashboard-card">
        <div class="card-header">
            <h3>Overall Health Status</h3>
            <div class="health-score">
                <span class="score-badge excellent">8.2/10</span>
            </div>
        </div>
        <div class="card-body">
            <div class="health-metrics">
                <div class="health-item">
                    <div class="health-label">
                        <i class="fas fa-check-circle text-success me-2"></i>
                        Diversification
                    </div>
                    <div class="health-status">
                        <div class="progress" style="height: 6px; width: 100px;">
                            <div class="progress-bar bg-success" style="width: 85%"></div>
                        </div>
                        <span class="health-value">Excellent</span>
                    </div>
                </div>
                <div class="health-item">
                    <div class="health-label">
                        <i class="fas fa-shield-alt text-success me-2"></i>
                        Risk Management
                    </div>
                    <div class="health-status">
                        <div class="progress" style="height: 6px; width: 100px;">
                            <div class="progress-bar bg-success" style="width: 78%"></div>
                        </div>
                        <span class="health-value">Good</span>
                    </div>
                </div>
                <div class="health-item">
                    <div class="health-label">
                        <i class="fas fa-chart-line text-warning me-2"></i>
                        Performance
                    </div>
                    <div class="health-status">
                        <div class="progress" style="height: 6px; width: 100px;">
                            <div class="progress-bar bg-warning" style="width: 68%"></div>
                        </div>
                        <span class="health-value">Moderate</span>
                    </div>
                </div>
                <div class="health-item">
                    <div class="health-label">
                        <i class="fas fa-balance-scale text-success me-2"></i>
                        Asset Balance
                    </div>
                    <div class="health-status">
                        <div class="progress" style="height: 6px; width: 100px;">
                            <div class="progress-bar bg-success" style="width: 82%"></div>
                        </div>
                        <span class="health-value">Excellent</span>
                    </div>
                </div>
                <div class="health-summary">
                    <p class="mb-0"><i class="fas fa-info-circle text-primary me-1"></i> Your portfolio is well-balanced with good diversification across asset classes. Consider reviewing F&O positions for better risk optimization.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Top Holdings -->
    <div class="dashboard-card">
        <div class="card-header">
            <h3>Top Holdings</h3>
            <a href="{{ url_for('dashboard_my_portfolio') if current_user.can_access_menu('dashboard_my_portfolio') else '#' }}" class="view-all">
                View All
            </a>
        </div>
        <div class="card-body">
            <div class="holdings-list">
                <div class="holding-item">
                    <div class="holding-info">
                        <span class="stock-symbol">RELIANCE</span>
                        <span class="stock-name">Reliance Industries</span>
                    </div>
                    <div class="holding-metrics">
                        <span class="holding-value">₹45,680</span>
                        <span class="holding-change positive">+2.4%</span>
                    </div>
                </div>
                <div class="holding-item">
                    <div class="holding-info">
                        <span class="stock-symbol">TCS</span>
                        <span class="stock-name">Tata Consultancy Services</span>
                    </div>
                    <div class="holding-metrics">
                        <span class="holding-value">₹38,240</span>
                        <span class="holding-change positive">+1.8%</span>
                    </div>
                </div>
                <div class="holding-item">
                    <div class="holding-info">
                        <span class="stock-symbol">INFY</span>
                        <span class="stock-name">Infosys Limited</span>
                    </div>
                    <div class="holding-metrics">
                        <span class="holding-value">₹29,850</span>
                        <span class="holding-change negative">-0.9%</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- AI Insights -->
    <div class="dashboard-card">
        <div class="card-header">
            <h3>AI Market Intelligence</h3>
            <div class="ai-status-indicator">
                <div class="status-dot active"></div>
                <span>Live Analysis</span>
            </div>
        </div>
        <div class="card-body">
            <div class="ai-insights">
                <div class="insight-item">
                    <div class="insight-icon">
                        <i class="fas fa-lightbulb text-warning"></i>
                    </div>
                    <div class="insight-content">
                        <p class="insight-text">Banking sector showing strong momentum. Consider HDFC Bank for long-term growth.</p>
                        <span class="insight-confidence">Confidence: 87%</span>
                    </div>
                </div>
                <div class="insight-item">
                    <div class="insight-icon">
                        <i class="fas fa-exclamation-triangle text-danger"></i>
                    </div>
                    <div class="insight-content">
                        <p class="insight-text">Technology stocks may face volatility due to global market conditions.</p>
                        <span class="insight-confidence">Confidence: 92%</span>
                    </div>
                </div>
                <div class="insight-item">
                    <div class="insight-icon">
                        <i class="fas fa-chart-line text-success"></i>
                    </div>
                    <div class="insight-content">
                        <p class="insight-text">Pharmaceutical sector expected to outperform in Q4. High growth potential.</p>
                        <span class="insight-confidence">Confidence: 89%</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Recent Activity and Chart -->
<div class="dashboard-grid cols-2">
    <!-- Portfolio Performance Chart -->
    <div class="dashboard-card">
        <div class="card-header">
            <h3>Portfolio Performance</h3>
            <div class="chart-controls">
                <button class="btn btn-sm btn-outline-secondary active">1M</button>
                <button class="btn btn-sm btn-outline-secondary">3M</button>
                <button class="btn btn-sm btn-outline-secondary">1Y</button>
            </div>
        </div>
        <div class="card-body">
            <div class="chart-container">
                <canvas id="portfolioChart" height="200"></canvas>
            </div>
        </div>
    </div>

    <!-- Recent Activity -->
    <div class="dashboard-card">
        <div class="card-header">
            <h3>Recent Activity</h3>
            <a href="#" class="view-all">View All</a>
        </div>
        <div class="card-body">
            <div class="activity-feed">
                <div class="activity-item">
                    <div class="activity-icon buy">
                        <i class="fas fa-arrow-up"></i>
                    </div>
                    <div class="activity-content">
                        <p class="activity-text">Bought 50 shares of <strong>RELIANCE</strong></p>
                        <span class="activity-time">2 hours ago</span>
                    </div>
                    <div class="activity-amount positive">+₹12,450</div>
                </div>
                <div class="activity-item">
                    <div class="activity-icon sell">
                        <i class="fas fa-arrow-down"></i>
                    </div>
                    <div class="activity-content">
                        <p class="activity-text">Sold 25 shares of <strong>WIPRO</strong></p>
                        <span class="activity-time">5 hours ago</span>
                    </div>
                    <div class="activity-amount negative">-₹8,970</div>
                </div>
                <div class="activity-item">
                    <div class="activity-icon signal">
                        <i class="fas fa-bell"></i>
                    </div>
                    <div class="activity-content">
                        <p class="activity-text">AI Signal: <strong>BUY</strong> recommendation for TCS</p>
                        <span class="activity-time">1 day ago</span>
                    </div>
                    <div class="activity-confidence">95% confidence</div>
                </div>
            </div>
        </div>
    </div>
</div>

{% if current_user.is_authenticated and current_user.can_access_menu('dashboard_account_handling') %}
<!-- HNI Account Manager Section -->
<div class="dashboard-grid cols-1" style="margin-top: 24px;">
    <div class="dashboard-card account-manager-card">
        <div class="card-header">
            <h3><i class="fas fa-crown me-2"></i>Your Dedicated Account Manager</h3>
            <button type="button" class="btn btn-sm btn-outline-primary" onclick="contactManager()">
                <i class="fas fa-phone me-1"></i>Contact Manager
            </button>
        </div>
        <div class="card-body">
            <div class="account-manager-content">
                <div class="manager-profile">
                    <img src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' width='80' height='80' viewBox='0 0 80 80'><circle cx='40' cy='40' r='40' fill='%234299e1'/><text x='50%25' y='50%25' text-anchor='middle' dy='.3em' fill='white' font-family='Arial' font-size='32'>RK</text></svg>" 
                         alt="Account Manager" class="manager-avatar">
                    <div class="manager-info">
                        <h4 class="manager-name">Rajesh Kumar</h4>
                        <p class="manager-title">Senior Account Manager</p>
                        <div class="manager-experience">
                            <i class="fas fa-award text-warning me-1"></i>
                            <span>8+ Years Experience</span>
                        </div>
                    </div>
                </div>
                
                <div class="manager-stats">
                    <div class="stat-item">
                        <div class="stat-icon">
                            <i class="fas fa-chart-line"></i>
                        </div>
                        <div class="stat-details">
                            <div class="stat-label">Success Rate</div>
                            <div class="stat-value">85.2%</div>
                            <div class="stat-progress">
                                <div class="stat-progress-bar" style="width: 85.2%"></div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="stat-item">
                        <div class="stat-icon">
                            <i class="fas fa-percentage"></i>
                        </div>
                        <div class="stat-details">
                            <div class="stat-label">Average Return</div>
                            <div class="stat-value text-success">+12.3%</div>
                        </div>
                    </div>
                    
                    <div class="stat-item">
                        <div class="stat-icon">
                            <i class="fas fa-shield-alt"></i>
                        </div>
                        <div class="stat-details">
                            <div class="stat-label">Risk Management</div>
                            <div class="stat-value">Moderate</div>
                        </div>
                    </div>
                </div>
                
                <div class="manager-contact">
                    <div class="contact-item">
                        <i class="fas fa-envelope"></i>
                        <a href="mailto:rajesh.kumar@targetcapital.com">rajesh.kumar@targetcapital.com</a>
                    </div>
                    <div class="contact-item">
                        <i class="fas fa-phone"></i>
                        <a href="tel:+919876543210">+91 98765 43210</a>
                    </div>
                    <div class="contact-item">
                        <i class="fab fa-whatsapp"></i>
                        <a href="https://wa.me/919876543210" target="_blank">WhatsApp Chat</a>
                    </div>
                    <div class="contact-item">
                        <i class="fas fa-clock"></i>
                        <span>Mon-Fri, 9:00 AM - 6:00 PM</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endif %}

<script>
// Dashboard Refresh Function
function refreshDashboard() {
    const refreshBtn = document.querySelector('[onclick="refreshDashboard()"]');
    const icon = refreshBtn.querySelector('i');
    
    // Add loading state
    icon.classList.add('fa-spin');
    refreshBtn.disabled = true;
    
    // Simulate refresh (replace with actual API call)
    setTimeout(() => {
        icon.classList.remove('fa-spin');
        refreshBtn.disabled = false;
        
        // Show success message
        const toast = document.createElement('div');
        toast.className = 'toast-notification success';
        toast.textContent = 'Dashboard refreshed successfully';
        document.body.appendChild(toast);
        
        setTimeout(() => toast.remove(), 3000);
    }, 1500);
}

// Show high-confidence signals modal when button is clicked
function showHighConfidenceSignals() {
    // Create modal with high-confidence signals
    const modalHTML = `
        <div class="modal fade" id="highConfidenceModal" tabindex="-1">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">
                            <i class="fas fa-star text-warning me-2"></i>High-Confidence Trading Signals
                        </h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                    </div>
                    <div class="modal-body">
                        <div class="alert alert-info">
                            <i class="fas fa-info-circle me-2"></i>
                            These are our highest confidence signals based on AI analysis and market conditions.
                        </div>
                        <div class="table-responsive">
                            <table class="table table-hover">
                                <thead>
                                    <tr>
                                        <th>Symbol</th>
                                        <th>Action</th>
                                        <th>Confidence</th>
                                        <th>Target</th>
                                        <th>Time</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><strong>RELIANCE</strong></td>
                                        <td><span class="badge bg-success">BUY</span></td>
                                        <td><span class="badge bg-warning">95%</span></td>
                                        <td>₹3,100</td>
                                        <td>2 min ago</td>
                                    </tr>
                                    <tr>
                                        <td><strong>TCS</strong></td>
                                        <td><span class="badge bg-danger">SELL</span></td>
                                        <td><span class="badge bg-warning">92%</span></td>
                                        <td>₹4,250</td>
                                        <td>5 min ago</td>
                                    </tr>
                                    <tr>
                                        <td><strong>HDFCBANK</strong></td>
                                        <td><span class="badge bg-success">BUY</span></td>
                                        <td><span class="badge bg-warning">90%</span></td>
                                        <td>₹1,680</td>
                                        <td>8 min ago</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        <a href="{{ url_for('dashboard_trading_signals') }}" class="btn btn-primary">
                            <i class="fas fa-chart-line me-1"></i>View All Signals
                        </a>
                    </div>
                </div>
            </div>
        </div>
    `;
    
    // Remove existing modal if present
    const existingModal = document.getElementById('highConfidenceModal');
    if (existingModal) {
        existingModal.remove();
    }
    
    // Add modal to page and show it
    document.body.insertAdjacentHTML('beforeend', modalHTML);
    const modal = new bootstrap.Modal(document.getElementById('highConfidenceModal'));
    modal.show();
}

// Contact Account Manager
function contactManager() {
    window.location.href = 'mailto:rajesh.kumar@targetcapital.com?subject=Account Manager Contact Request';
}

// Portfolio Chart
document.addEventListener('DOMContentLoaded', function() {
    const ctx = document.getElementById('portfolioChart');
    if (ctx) {
        new Chart(ctx, {
            type: 'line',
            data: {
                labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                datasets: [{
                    label: 'Portfolio Value',
                    data: [210000, 225000, 218000, 235000, 245000, 245680],
                    borderColor: '#4299e1',
                    backgroundColor: 'rgba(66, 153, 225, 0.1)',
                    borderWidth: 2,
                    fill: true,
                    tension: 0.4
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: false
                    }
                },
                scales: {
                    y: {
                        beginAtZero: false,
                        grid: {
                            color: 'rgba(0,0,0,0.05)'
                        }
                    },
                    x: {
                        grid: {
                            display: false
                        }
                    }
                }
            }
        });
    }
});
</script>

<style>
/* Dashboard Specific Styles */
.metric-icon {
    width: 48px;
    height: 48px;
    border-radius: 12px;
    background: rgba(66, 153, 225, 0.1);
    display: flex;
    align-items: center;
    justify-content: center;
}

.metric-icon i {
    font-size: 20px;
}

.metric-change {
    display: flex;
    align-items: center;
    gap: 4px;
    font-size: 12px;
    font-weight: 600;
    padding: 4px 8px;
    border-radius: 12px;
}

.metric-change.positive {
    background: rgba(72, 187, 120, 0.1);
    color: #48bb78;
}

.metric-change.negative {
    background: rgba(245, 101, 101, 0.1);
    color: #f56565;
}

.metric-change.neutral {
    background: rgba(160, 174, 192, 0.1);
    color: #a0aec0;
}

.metric-value {
    font-size: 28px;
    font-weight: 700;
    color: #1a202c;
    margin: 8px 0 4px 0;
}

.metric-label {
    font-size: 14px;
    color: #718096;
    margin: 0;
    font-weight: 500;
}

.metric-trend {
    margin-top: 8px;
}

.metric-badge {
    display: flex;
    align-items: center;
}

.metric-status {
    display: flex;
    align-items: center;
}

.update-time {
    font-size: 12px;
    color: #a0aec0;
}

.view-all {
    font-size: 14px;
    color: #4299e1;
    text-decoration: none;
    font-weight: 500;
}

.view-all:hover {
    color: #3182ce;
}

/* Market Indices */
.market-indices {
    display: flex;
    flex-direction: column;
    gap: 16px;
}

.index-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 12px 0;
    border-bottom: 1px solid #e2e8f0;
}

.index-item:last-child {
    border-bottom: none;
}

.index-info {
    display: flex;
    flex-direction: column;
}

.index-name {
    font-size: 14px;
    font-weight: 600;
    color: #2d3748;
}

.index-value {
    font-size: 16px;
    font-weight: 700;
    color: #1a202c;
}

.index-change {
    display: flex;
    align-items: center;
    gap: 4px;
    font-size: 12px;
    font-weight: 600;
}

.index-change.positive {
    color: #48bb78;
}

.index-change.negative {
    color: #f56565;
}

/* Asset Allocation */
.asset-allocation {
    display: flex;
    flex-direction: column;
    gap: 20px;
}

.allocation-item {
    padding-bottom: 16px;
    border-bottom: 1px solid #e2e8f0;
}

.allocation-item:last-child {
    padding-bottom: 0;
    border-bottom: none;
}

.allocation-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 4px;
}

.allocation-info {
    display: flex;
    align-items: center;
}

.asset-name {
    font-size: 14px;
    font-weight: 600;
    color: #2d3748;
}

.allocation-percentage {
    font-size: 16px;
    font-weight: 700;
    color: #1a202c;
}

/* Health Status */
.health-score {
    display: flex;
    align-items: center;
}

.score-badge {
    padding: 6px 16px;
    border-radius: 20px;
    font-size: 14px;
    font-weight: 700;
}

.score-badge.excellent {
    background: rgba(72, 187, 120, 0.15);
    color: #2f855a;
}

.score-badge.good {
    background: rgba(66, 153, 225, 0.15);
    color: #2c5282;
}

.score-badge.moderate {
    background: rgba(237, 137, 54, 0.15);
    color: #c05621;
}

.health-metrics {
    display: flex;
    flex-direction: column;
    gap: 16px;
}

.health-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px 0;
}

.health-label {
    display: flex;
    align-items: center;
    font-size: 14px;
    font-weight: 500;
    color: #2d3748;
}

.health-status {
    display: flex;
    align-items: center;
    gap: 12px;
}

.health-value {
    font-size: 13px;
    font-weight: 600;
    color: #4a5568;
    min-width: 70px;
    text-align: right;
}

.health-summary {
    margin-top: 16px;
    padding-top: 16px;
    border-top: 1px solid #e2e8f0;
}

.health-summary p {
    font-size: 13px;
    color: #4a5568;
    line-height: 1.6;
}

/* Holdings */
.holdings-list {
    display: flex;
    flex-direction: column;
    gap: 16px;
}

.holding-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.holding-info {
    display: flex;
    flex-direction: column;
}

.stock-symbol {
    font-size: 14px;
    font-weight: 700;
    color: #2d3748;
}

.stock-name {
    font-size: 12px;
    color: #718096;
}

.holding-metrics {
    display: flex;
    flex-direction: column;
    align-items: flex-end;
}

.holding-value {
    font-size: 14px;
    font-weight: 600;
    color: #1a202c;
}

.holding-change {
    font-size: 12px;
    font-weight: 600;
}

.holding-change.positive {
    color: #48bb78;
}

.holding-change.negative {
    color: #f56565;
}

/* AI Insights */
.ai-status-indicator {
    display: flex;
    align-items: center;
    gap: 6px;
    font-size: 12px;
    color: #48bb78;
    font-weight: 500;
}

.ai-insights {
    display: flex;
    flex-direction: column;
    gap: 20px;
}

.insight-item {
    display: flex;
    gap: 12px;
}

.insight-icon {
    flex-shrink: 0;
    width: 32px;
    height: 32px;
    border-radius: 8px;
    background: rgba(66, 153, 225, 0.1);
    display: flex;
    align-items: center;
    justify-content: center;
}

.insight-content {
    flex: 1;
}

.insight-text {
    font-size: 13px;
    color: #2d3748;
    margin: 0 0 4px 0;
    line-height: 1.4;
}

.insight-confidence {
    font-size: 11px;
    color: #718096;
    font-weight: 500;
}

/* Activity Feed */
.activity-feed {
    display: flex;
    flex-direction: column;
    gap: 16px;
}

.activity-item {
    display: flex;
    align-items: center;
    gap: 12px;
}

.activity-icon {
    flex-shrink: 0;
    width: 32px;
    height: 32px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 12px;
}

.activity-icon.buy {
    background: rgba(72, 187, 120, 0.1);
    color: #48bb78;
}

.activity-icon.sell {
    background: rgba(245, 101, 101, 0.1);
    color: #f56565;
}

.activity-icon.signal {
    background: rgba(66, 153, 225, 0.1);
    color: #4299e1;
}

.activity-content {
    flex: 1;
}

.activity-text {
    font-size: 13px;
    color: #2d3748;
    margin: 0 0 2px 0;
}

.activity-time {
    font-size: 11px;
    color: #a0aec0;
}

.activity-amount {
    font-size: 13px;
    font-weight: 600;
}

.activity-amount.positive {
    color: #48bb78;
}

.activity-amount.negative {
    color: #f56565;
}

.activity-confidence {
    font-size: 11px;
    color: #4299e1;
    font-weight: 500;
}

/* Chart Container */
.chart-container {
    height: 200px;
    position: relative;
}

.chart-controls {
    display: flex;
    gap: 4px;
}

.chart-controls .btn {
    padding: 4px 12px;
    font-size: 12px;
}

/* Toast Notifications */
.toast-notification {
    position: fixed;
    top: 20px;
    right: 20px;
    background: #4299e1;
    color: white;
    padding: 12px 20px;
    border-radius: 8px;
    font-size: 14px;
    z-index: 1060;
    animation: slideIn 0.3s ease;
}

.toast-notification.success {
    background: #48bb78;
}

/* Clickable Dashboard Cards */
.clickable-card {
    cursor: pointer;
    transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.clickable-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1) !important;
}

@keyframes slideIn {
    from {
        transform: translateX(100%);
        opacity: 0;
    }
    to {
        transform: translateX(0);
        opacity: 1;
    }
}

/* Mobile Responsiveness */
@media (max-width: 768px) {
    .dashboard-grid.cols-4 {
        grid-template-columns: repeat(2, 1fr);
    }
    
    .dashboard-grid.cols-3,
    .dashboard-grid.cols-2 {
        grid-template-columns: 1fr;
    }
    
    .metric-value {
        font-size: 24px;
    }
    
    .header-actions {
        flex-direction: column;
        gap: 8px;
        width: 100%;
    }
    
    .header-actions .btn {
        width: 100%;
    }
}

@media (max-width: 480px) {
    .dashboard-grid.cols-4 {
        grid-template-columns: 1fr;
    }
    
    .metric-icon {
        width: 40px;
        height: 40px;
    }
    
    .metric-value {
        font-size: 20px;
    }
}

/* Account Manager Card Styles */
.account-manager-card {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    border: none;
}

.account-manager-card .card-header {
    background: transparent;
    border-bottom: 1px solid rgba(255, 255, 255, 0.2);
}

.account-manager-card .card-header h3 {
    color: white;
}

.account-manager-content {
    display: grid;
    grid-template-columns: auto 1fr auto;
    gap: 32px;
    align-items: start;
}

.manager-profile {
    display: flex;
    gap: 20px;
    align-items: center;
}

.manager-avatar {
    width: 80px;
    height: 80px;
    border-radius: 50%;
    border: 3px solid rgba(255, 255, 255, 0.3);
}

.manager-info {
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.manager-name {
    font-size: 20px;
    font-weight: 600;
    color: white;
    margin: 0;
}

.manager-title {
    font-size: 14px;
    color: rgba(255, 255, 255, 0.9);
    margin: 0;
}

.manager-experience {
    display: flex;
    align-items: center;
    gap: 4px;
    font-size: 13px;
    color: rgba(255, 255, 255, 0.9);
    margin-top: 8px;
}

.manager-stats {
    display: flex;
    flex-direction: column;
    gap: 20px;
}

.stat-item {
    display: flex;
    gap: 12px;
    align-items: center;
}

.stat-icon {
    width: 40px;
    height: 40px;
    border-radius: 10px;
    background: rgba(255, 255, 255, 0.2);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 18px;
}

.stat-details {
    flex: 1;
}

.stat-label {
    font-size: 12px;
    color: rgba(255, 255, 255, 0.8);
    margin-bottom: 4px;
}

.stat-value {
    font-size: 18px;
    font-weight: 600;
    color: white;
}

.stat-progress {
    height: 4px;
    background: rgba(255, 255, 255, 0.2);
    border-radius: 2px;
    margin-top: 6px;
    overflow: hidden;
}

.stat-progress-bar {
    height: 100%;
    background: white;
    border-radius: 2px;
}

.manager-contact {
    display: flex;
    flex-direction: column;
    gap: 12px;
    background: rgba(255, 255, 255, 0.1);
    padding: 20px;
    border-radius: 12px;
}

.contact-item {
    display: flex;
    align-items: center;
    gap: 12px;
    font-size: 14px;
    color: white;
}

.contact-item i {
    width: 20px;
    text-align: center;
    opacity: 0.8;
}

.contact-item a {
    color: white;
    text-decoration: none;
    transition: opacity 0.2s;
}

.contact-item a:hover {
    opacity: 0.8;
}

@media (max-width: 1200px) {
    .account-manager-content {
        grid-template-columns: 1fr;
        gap: 24px;
    }
    
    .manager-contact {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .manager-profile {
        flex-direction: column;
        text-align: center;
    }
    
    .manager-stats {
        width: 100%;
    }
}
</style>
{% endblock %}